<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DayZ Chernarus Hub - Live Simulation</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>

<style>
html,body{margin:0;padding:0;height:100%;background:#111;overflow:hidden;font-family:monospace;}
#map-container{position:relative;width:100%;height:100%;}
#map{position:absolute;inset:0;z-index:10;}
.navbar{position:fixed;top:0;width:100%;z-index:99999;}
.navbar .btn{display:flex;align-items:center;gap:4px;transition:0.15s;}
.navbar .btn:hover{box-shadow:0 0 12px #ff5555;}
.btn-active{box-shadow:0 0 15px #ff4500!important;}
.panel{
  position:absolute;
  background:rgba(0,0,0,0.65);
  color:#7CFC00;
  padding:0.7rem 0.9rem;
  border-radius:8px;
  z-index:20;
  font-size:0.9rem;
  text-shadow:0 0 3px #000;
}
#lore{top:70px;right:10px;max-width:280px;}
#tip{bottom:10px;left:50%;transform:translateX(-50%);min-width:260px;text-align:center;}
.marker-military{
  width:18px;height:18px;background:red;border:2px solid #fff;border-radius:50%;
  box-shadow:0 0 10px #ff0000,0 0 20px rgba(255,0,0,0.4);
  animation: pulse 2s infinite;
}
@keyframes pulse{
  0%{box-shadow:0 0 10px #ff0000,0 0 20px rgba(255,0,0,0.4);}
  50%{box-shadow:0 0 20px #ff0000,0 0 40px rgba(255,0,0,0.6);}
  100%{box-shadow:0 0 10px #ff0000,0 0 20px rgba(255,0,0,0.4);}
}
.loot-hotspot{
  width:14px;height:14px;background:yellow;border-radius:50%;
  box-shadow:0 0 8px #ffff00,0 0 16px rgba(255,255,0,0.6);
  animation: lootPulse 2.5s infinite;
  cursor:pointer;
}
@keyframes lootPulse{
  0%{box-shadow:0 0 6px #ffff00,0 0 12px rgba(255,255,0,0.4);}
  50%{box-shadow:0 0 14px #ffff00,0 0 28px rgba(255,255,0,0.7);}
  100%{box-shadow:0 0 6px #ffff00,0 0 12px rgba(255,255,0,0.4);}
}
.fog-overlay{
  pointer-events:none;
  position:absolute;
  inset:0;
  background: radial-gradient(circle at 50% 50%, rgba(255,255,255,0.02), rgba(0,0,0,0.15));
  z-index:15;
  animation: fogMove 80s linear infinite;
}
@keyframes fogMove{
  0%{background-position:0 0;}
  100%{background-position:1000px 1000px;}
}
</style>
</head>
<body>

<nav class="navbar navbar-dark bg-dark">
  <div class="container-fluid">
    <span class="navbar-brand"><i class="fa-solid fa-skull-crossbones me-2"></i>DayZ Chernarus Hub</span>
    <div class="d-flex gap-2">
      <button id="toggleHeat" class="btn btn-warning btn-sm"><i class="fa-solid fa-fire"></i> Thermal</button>
    </div>
  </div>
</nav>

<div id="map-container">
  <div id="map"></div>
  <div class="fog-overlay"></div>
</div>

<div id="lore" class="panel">Hover a military site</div>
<div id="tip" class="panel">Survival Tip: Coastal towns are looted fast!</div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script src="https://cdn.jsdelivr.net/npm/leaflet.heat/dist/leaflet-heat.js"></script>

<script>
// --- MAP ---
const MAP_W=1500, MAP_H=1450;
const map=L.map('map',{crs:L.CRS.Simple,minZoom:-2,maxZoom:6});
const bounds=[[0,0],[MAP_H,MAP_W]];
L.imageOverlay('chernarus.png',bounds).addTo(map);
map.fitBounds(bounds);
const px=(x,y)=>[y,x];

// --- MILITARY MARKERS ---
const military=[
  {x:214,y:454,name:"ZELENEGORSK MILITARY",lore:"Top military loot, high zombie spawn."},
  {x:410,y:148,name:"BALOTA MILITARY",lore:"NW Airfield area, highly dangerous."},
  {x:152,y:260,name:"PAVLOVO MILITARY",lore:"Loot spot near Pavlovo, moderate risk."},
  {x:370,y:754,name:"VMC MILITARY",lore:"Vehicle Military Checkpoint, watch for ambush."},
  {x:784,y:1388,name:"KAMENSK MILITARY",lore:"Remote area, high-tier loot."},
  {x:1120,y:1280,name:"NEAF MILITARY",lore:"North East Airfield, epic loot, deadly."},
  {x:566,y:734,name:"STARY MILITARY",lore:"Central high loot, watch corners."},
  {x:264,y:1376,name:"TISY MILITARY",lore:"Tisy camp, high loot but far from cities."}
];
military.forEach(m=>{
  const mk=L.marker(px(m.x,m.y),{icon:L.divIcon({className:"marker-military"})}).addTo(map);
  mk.on("mouseover",()=>lore.innerText=m.name+": "+m.lore);
  mk.on("mouseout",()=>lore.innerText="Hover a military site");
});

// --- LOOT HOTSPOTS & RESPAWN SYSTEM ---
const lootHotspots=[
  {x:300,y:500,name:"Police Station"},
  {x:600,y:800,name:"Hospital"},
  {x:200,y:1200,name:"Factory"},
  {x:1000,y:1000,name:"Farms"}
];
const lootTimers = lootHotspots.map(l => ({
  x: l.x, y: l.y, name: l.name,
  marker: L.marker(px(l.x,l.y), {icon:L.divIcon({className:"loot-hotspot"})}).addTo(map),
  available: true
}));
lootTimers.forEach(l=>{
  l.marker.on("mouseover",()=>lore.innerText=l.name+": Loot hotspot");
  l.marker.on("mouseout",()=>lore.innerText="Hover a military site");
  l.marker.on("click",()=>{
    if(!l.available) return alert(`${l.name} is empty! Wait for respawn.`);
    alert(`You looted ${l.name}!`);
    l.available=false;
    l.marker.getElement().style.opacity=0.3;
    const respawnTime=1000*(10+Math.floor(Math.random()*20)); // demo 10-30 sec
    setTimeout(()=>{l.available=true;l.marker.getElement().style.opacity=1;}, respawnTime);
  });
});

// --- HEATMAP ---
const heat=L.heatLayer(military.map(m=>[m.y,m.x,1.5]),{
  radius:50, blur:25, max:1.5,
  gradient:{0:'rgba(0,0,0,0)',0.2:'rgba(0,0,255,0.6)',0.4:'rgba(0,255,0,0.7)',0.6:'rgba(255,255,0,0.85)',0.8:'rgba(255,165,0,0.9)',1:'rgba(255,0,0,1)'}
});
let heatOn=false;

// --- PLAYER DOTS (REALISTIC SOUTH->NORTH / EAST->WEST ROUTES) ---
const realisticRoutes=[
  [{x:264,y:1376},{x:784,y:1388},{x:1120,y:1280}],
  [{x:152,y:260},{x:410,y:148},{x:214,y:454},{x:566,y:734}],
  [{x:370,y:754},{x:784,y:1388},{x:1120,y:1280}]
];
const playerDots=[];
const colors=['lime','cyan','magenta','orange','yellow'];
realisticRoutes.forEach((route,i)=>{
  const dot=L.circleMarker(px(route[0].x,route[0].y),{radius:6,color:colors[i%colors.length],fillOpacity:1}).addTo(map);
  playerDots.push({dot:dot,route:route,index:0,color:colors[i%colors.length],trail:[]});
});
function animatePlayerDots(){
  playerDots.forEach(p=>{
    const nextIndex=(p.index+1)%p.route.length;
    const start=px(p.route[p.index].x,p.route[p.index].y);
    const end=px(p.route[nextIndex].x,p.route[nextIndex].y);

    p.dot.setLatLng(end);
    const segment=L.polyline([start,end],{color:p.color,weight:4,opacity:0.6,dashArray:"6,4"}).addTo(map);
    p.trail.push(segment);
    if(p.trail.length>6){ map.removeLayer(p.trail.shift()); }
    p.index=nextIndex;
  });
}
setInterval(animatePlayerDots,1200);

// --- SURVIVAL TIPS ---
const tips=[
  "Stay hydrated; water is life.",
  "Avoid high zombie populations at night.",
  "Cities have best loot but highest risk.",
  "Military areas are worth the danger.",
  "Check rooftops for rare loot spawns.",
  "Use bushes and tall grass to hide from snipers.",
  "Always carry a melee weapon for stealth kills.",
  "Be careful near airfields, player ambush hotspots.",
  "Use vehicles sparingly; noise attracts attention.",
  "Night travel is risky but less populated."
];
setInterval(()=>{tip.innerText="Survival Tip: "+tips[Math.floor(Math.random()*tips.length)];},12000);

// --- BUTTON ---
toggleHeat.onclick=()=>{heatOn=!heatOn;heatOn?heat.addTo(map):map.removeLayer(heat);toggleHeat.classList.toggle('btn-active');};
</script>
</body>
</html>
