<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DayZ Chernarus Hub - Live Simulation</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
html,body{margin:0;padding:0;height:100%;background:#111;overflow:hidden;}
#map-container{position:relative;width:100%;height:100%;filter:none;}
#map{position:absolute;inset:0;z-index:10;}
.navbar{position:fixed;top:0;width:100%;z-index:99999;}
.navbar .btn{display:flex;align-items:center;gap:4px;transition:0.15s;}
.navbar .btn:hover{box-shadow:0 0 12px #ff5555;}
.btn-active{box-shadow:0 0 15px #ff4500!important;}
.panel{
  position:absolute;
  background:rgba(0,0,0,0.6);
  color:#7CFC00;
  padding:0.7rem 0.9rem;
  border-radius:8px;
  z-index:20;
  font-family:monospace;
  font-size:0.9rem;
  text-shadow:0 0 3px #000;
}
#lore{top:70px;right:10px;max-width:260px;}
#tip{bottom:10px;left:50%;transform:translateX(-50%);min-width:220px;text-align:center;}
.marker-military{
  width:18px;height:18px;
  background:red;
  border:2px solid #fff;
  border-radius:50%;
  box-shadow:0 0 10px #ff0000,0 0 20px rgba(255,0,0,0.4);
  animation: pulse 2s infinite;
}
@keyframes pulse{
  0%{box-shadow:0 0 10px #ff0000,0 0 20px rgba(255,0,0,0.4);}
  50%{box-shadow:0 0 20px #ff0000,0 0 40px rgba(255,0,0,0.6);}
  100%{box-shadow:0 0 10px #ff0000,0 0 20px rgba(255,0,0,0.4);}
}
.loot-hotspot{
  width:14px;height:14px;
  background:yellow;
  border-radius:50%;
  box-shadow:0 0 6px #ffff00,0 0 12px rgba(255,255,0,0.4);
  animation: lootPulse 2.5s infinite;
}
@keyframes lootPulse{
  0%{box-shadow:0 0 6px #ffff00,0 0 12px rgba(255,255,0,0.4);}
  50%{box-shadow:0 0 12px #ffff00,0 0 24px rgba(255,255,0,0.6);}
  100%{box-shadow:0 0 6px #ffff00,0 0 12px rgba(255,255,0,0.4);}
}
.fog-overlay{
  pointer-events:none;
  position:absolute;
  inset:0;
  background: radial-gradient(circle at 50% 50%, rgba(255,255,255,0.02), rgba(0,0,0,0.15));
  z-index:15;
  animation: fogMove 80s linear infinite;
}
@keyframes fogMove{
  0%{background-position:0 0;}
  100%{background-position:1000px 1000px;}
}
.zombie-dot{
  width:6px;height:6px;
  background:red;
  border-radius:50%;
  position:absolute;
  opacity:0;
}
</style>
</head>

<body>

<nav class="navbar navbar-dark bg-dark">
  <div class="container-fluid">
    <span class="navbar-brand"><i class="fa-solid fa-skull-crossbones me-2"></i>DayZ Chernarus Hub</span>
    <div class="d-flex gap-2">
      <button id="toggleHeat" class="btn btn-warning btn-sm"><i class="fa-solid fa-fire"></i> Thermal</button>
      <button id="toggleNight" class="btn btn-secondary btn-sm"><i class="fa-solid fa-moon"></i> Night</button>
    </div>
  </div>
</nav>

<div id="map-container">
  <div id="map"></div>
  <div class="fog-overlay"></div>
</div>

<div id="lore" class="panel">Hover a military site</div>
<div id="tip" class="panel">Survival Tip: Coastal towns are looted fast!</div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script src="https://cdn.jsdelivr.net/npm/leaflet.heat/dist/leaflet-heat.js"></script>

<script>
// --- MAP SETUP ---
const MAP_W=1500, MAP_H=1450;
const map=L.map('map',{crs:L.CRS.Simple,minZoom:-2,maxZoom:6});
const bounds=[[0,0],[MAP_H,MAP_W]];
L.imageOverlay('chernarus.png',bounds).addTo(map);
map.fitBounds(bounds);
const px=(x,y)=>[y,x];

// --- MILITARY MARKERS ---
const military=[
  {x:214,y:454,name:"ZELENEGORSK MILITARY"},
  {x:410,y:148,name:"BALOTA MILITARY"},
  {x:152,y:260,name:"PAVLOVO MILITARY"},
  {x:370,y:754,name:"VMC MILITARY"},
  {x:784,y:1388,name:"KAMENSK MILITARY"},
  {x:1120,y:1280,name:"NEAF MILITARY"},
  {x:566,y:734,name:"STARY MILITARY"},
  {x:264,y:1376,name:"TISY MILITARY"}
];
military.forEach(m=>{
  const mk=L.marker(px(m.x,m.y),{icon:L.divIcon({className:"marker-military"})}).addTo(map);
  mk.on("mouseover",()=>lore.innerText=m.name);
  mk.on("mouseout",()=>lore.innerText="Hover a military site");
});

// --- LOOT HOTSPOTS ---
const lootHotspots=[
  {x:300,y:500},{x:600,y:800},{x:200,y:1200},{x:1000,y:1000}
];
lootHotspots.forEach(l=>{
  const mk=L.marker(px(l.x,l.y),{icon:L.divIcon({className:"loot-hotspot"})}).addTo(map);
});

// --- HEATMAP ---
const heat=L.heatLayer(military.map(m=>[m.y,m.x,1]),{
  radius:60, blur:30, max:1,
  gradient:{0:'rgba(0,0,0,0)',0.2:'rgba(0,0,255,0.6)',0.4:'rgba(0,255,0,0.7)',0.6:'rgba(255,255,0,0.8)',0.8:'rgba(255,165,0,0.9)',1:'rgba(255,0,0,1)'}
});
let heatOn=false;

// --- ZOMBIE HORDES ---
function spawnZombie(){
  const dot=document.createElement("div");
  dot.className="zombie-dot";
  dot.style.left=Math.random()*window.innerWidth+"px";
  dot.style.top=Math.random()*window.innerHeight+"px";
  document.body.appendChild(dot);
  let opacity=0;
  const fadeIn=setInterval(()=>{opacity+=0.03; dot.style.opacity=opacity; if(opacity>=0.5)clearInterval(fadeIn)},30);
  setTimeout(()=>{dot.remove()},2000+Math.random()*3000);
}
setInterval(spawnZombie,1500);

// --- SIMULATED PLAYER DOTS ---
const commonRoutes=[
  [{x:214,y:454},{x:410,y:148},{x:152,y:260},{x:566,y:734},{x:1120,y:1280}],
  [{x:410,y:148},{x:152,y:260},{x:214,y:454},{x:264,y:1376}],
  [{x:370,y:754},{x:784,y:1388},{x:1120,y:1280}]
];
const colors=['lime','cyan','magenta','orange','yellow'];
const playerDots=[];
commonRoutes.forEach((route,i)=>{
  const dot=L.circleMarker(px(route[0].x,route[0].y),{radius:6,color:colors[i%colors.length],fillOpacity:1}).addTo(map);
  playerDots.push({dot:dot,route:route,index:0,color:colors[i%colors.length],trail:[]});
});

function animatePlayerDots(){
  playerDots.forEach(p=>{
    const nextIndex=(p.index+1)%p.route.length;
    const start=px(p.route[p.index].x,p.route[p.index].y);
    const end=px(p.route[nextIndex].x,p.route[nextIndex].y);

    p.dot.setLatLng(end);

    const segment=L.polyline([start,end],{color:p.color,weight:3,opacity:0.5}).addTo(map);
    p.trail.push(segment);
    if(p.trail.length>10){ map.removeLayer(p.trail.shift()); }

    p.index=nextIndex;
  });
}
setInterval(animatePlayerDots,1200);

// --- SURVIVAL TIPS ---
const tips=["Stay hydrated; water is life.","Avoid high zombie populations at night.","Cities have best loot but highest risk.","Military areas are worth the danger."];
setInterval(()=>{tip.innerText="Survival Tip: "+tips[Math.floor(Math.random()*tips.length)];},12000);

// --- BUTTONS ---
toggleHeat.onclick=()=>{heatOn=!heatOn;heatOn?heat.addTo(map):map.removeLayer(heat);toggleHeat.classList.toggle('btn-active');};
toggleNight.onclick=()=>{document.getElementById("map-container").style.filter=toggleNight.classList.toggle('btn-active')?"brightness(0.15) contrast(1.7) grayscale(0.3)":"none";};
</script>
</body>
</html>
