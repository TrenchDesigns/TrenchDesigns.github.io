<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CHERNOMAP â€“ Interactive Map</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
body {
    margin: 0;
    font-family: 'Segoe UI', Arial, sans-serif;
    background: #111;
    color: #fff;
}

.navbar-custom {
    background: rgba(30,30,30,0.7);
    backdrop-filter: blur(12px);
    box-shadow: 0 0 15px rgba(0,0,0,0.5);
}

#map-wrapper {
    position: relative;
    width: 1500px;
    height: 1356px;
    margin: 20px auto;
    border: 2px solid #fff;
    overflow: hidden;
    cursor: grab;
}

#map-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 1500px;
    height: 1356px;
    background: url('CHERNOMAP.webp') no-repeat top left;
    background-size: cover;
    transform-origin: center center;
}

.pin {
    position: absolute;
    width: 14px;
    height: 14px;
    border-radius: 50%;
    transform: translate(-50%, -50%);
    pointer-events: auto;
    cursor: pointer;
    border: 2px solid #fff;
    transition: transform 0.2s;
    z-index: 10;
}

.pin:hover {
    transform: translate(-50%, -50%) scale(1.5);
}

#heatmap-canvas {
    position: absolute;
    top: 0;
    left: 0;
    width: 1500px;
    height: 1356px;
    pointer-events: none;
    z-index: 5;
}

#control-panel {
    width: 500px;
    margin: 20px auto;
    background: rgba(26,26,26,0.75);
    backdrop-filter: blur(12px);
    border-radius: 15px;
    padding: 15px;
}

#control-panel h2 {
    text-align: center;
}

.toggle-btn {
    margin: 5px;
}
</style>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-dark navbar-custom">
    <div class="container-fluid">
        <a class="navbar-brand" href="#">CHERNOMAP</a>
        <button class="btn btn-outline-light" id="toggleHeat">Toggle Thermal Heatmap</button>
    </div>
</nav>

<div id="map-wrapper">
    <canvas id="heatmap-canvas"></canvas>
    <div id="map-container"></div>
</div>

<div id="control-panel">
    <h2>Map Controls</h2>
    <button class="btn btn-primary toggle-btn" id="zoomIn">Zoom In</button>
    <button class="btn btn-primary toggle-btn" id="zoomOut">Zoom Out</button>
    <button class="btn btn-secondary toggle-btn" id="resetView">Reset View</button>
</div>

<script>
const mapContainer = document.getElementById('map-container');
const heatCanvas = document.getElementById('heatmap-canvas');
const ctx = heatCanvas.getContext('2d');
const toggleHeatBtn = document.getElementById('toggleHeat');
let showHeat = true;
let scale = 1;
let offsetX = 0;
let offsetY = 0;
let isDragging = false;
let startX, startY;

/* ===== LOCATIONS ===== */
const locations = [
{n:'Balota',x:453,y:1188},{n:'Balota Airfield',x:479,y:1197},{n:'Berezino',x:1149,y:536},{n:'Bor',x:323,y:1046},
{n:'Chernaya Polyana',x:1179,y:167},{n:'Chernogorsk',x:621,y:1176},{n:'Drozhino',x:328,y:973},{n:'Dubrovka',x:978,y:521},
{n:'Elektrozavodsk',x:971,y:1224},{n:'Gorka',x:899,y:604},{n:'Grishino',x:566,y:473},{n:'Guglovo',x:797,y:796},
{n:'Kabanino',x:502,y:627},{n:'Kalinovka',x:713,y:192},{n:'Kamensk Military',x:737,y:73},{n:'Kamyshovo',x:1121,y:1088},
{n:'Khelm',x:1141,y:409},{n:'Komarovo',x:344,y:1188},{n:'Kozlovka',x:421,y:987},{n:'Krasnostav',x:1036,y:296},
{n:'Krasnostav Airstrip',x:1132,y:266},{n:'Lopatino',x:268,y:506},{n:'Mogilevka',x:717,y:944},{n:'Msta',x:1064,y:909},
{n:'Myshkino',x:212,y:744},{n:'Myshkino Tents',x:122,y:748},{n:'Nadezhdino',x:559,y:977},{n:'Northwest Airfield (NWAF)',x:418,y:453},
{n:'Novaya Petrovka',x:323,y:222},{n:'Novodmitrovsk',x:1076,y:112},{n:'Novy Sobor',x:673,y:713},{n:'Orlovets',x:1127,y:743},
{n:'Pavlovo',x:179,y:1077},{n:'Pavlovo Military',x:213,y:1104},{n:'Polana',x:997,y:651},{n:'Prigorodki',x:698,y:1116},
{n:'Pulkovo',x:467,y:898},{n:'Pusta',x:866,y:1072},{n:'Rogovo',x:452,y:787},{n:'Severograd',x:741,y:261},
{n:'Shakhovka',x:877,y:823},{n:'Sinystok',x:149,y:314},{n:'Solnichniy',x:1232,y:833},{n:'Sosnovka',x:247,y:834},
{n:'Staroye',x:924,y:909},{n:'Stary Sobor',x:587,y:723},{n:'Stary Sobor Military',x:607,y:701},{n:'Svetlojarsk',x:1292,y:211},
{n:'Tisy Military Base',x:157,y:139},{n:'Topolniki',x:287,y:254},{n:'Tulga',x:1196,y:998},{n:'Vybor',x:372,y:603},
{n:'Vyshnoye',x:633,y:862},{n:'Zelenogorsk',x:263,y:934},{n:'Zelenogorsk Military',x:243,y:951},{n:'Zvir',x:62,y:928}
];

/* Hotspot weights for thermal */
const thermalWeights = {
  'Northwest Airfield (NWAF)': 5,
  'Tisy Military Base': 5,
  'Balota Airfield': 4,
  'Chernogorsk': 4,
  'Elektrozavodsk': 4,
  'Zelenogorsk': 3,
  'Stary Sobor': 3,
  'Novy Sobor': 3,
  'Vybor': 3,
  'Berezino': 3
};

/* ===== PINS ===== */
locations.forEach(loc=>{
    const pin = document.createElement('div');
    pin.className='pin';
    pin.style.left = loc.x+'px';
    pin.style.top = loc.y+'px';
    pin.title = loc.n;
    mapContainer.appendChild(pin);
});

/* ===== THERMAL RENDER ===== */
function drawHeatmap(){
    ctx.clearRect(0,0,heatCanvas.width,heatCanvas.height);
    if(!showHeat) return;
    locations.forEach(l=>{
        const weight = thermalWeights[l.n]||1;
        const radius = 50*weight*scale;
        const alpha = 0.1*weight;
        const grad = ctx.createRadialGradient(l.x*scale+offsetX,l.y*scale+offsetY,0,l.x*scale+offsetX,l.y*scale+offsetY,radius);
        grad.addColorStop(0,'rgba(255,0,0,'+alpha+')');
        grad.addColorStop(1,'rgba(255,0,0,0)');
        ctx.fillStyle = grad;
        ctx.fillRect(l.x*scale+offsetX-radius,l.y*scale+offsetY-radius,radius*2,radius*2);
    });
}

/* ===== ZOOM & PAN ===== */
document.getElementById('zoomIn').addEventListener('click',()=>{scale*=1.2; drawHeatmap();});
document.getElementById('zoomOut').addEventListener('click',()=>{scale/=1.2; drawHeatmap();});
document.getElementById('resetView').addEventListener('click',()=>{
    scale=1; offsetX=0; offsetY=0; drawHeatmap();
});

mapContainer.addEventListener('mousedown',e=>{
    isDragging=true; startX=e.clientX-offsetX; startY=e.clientY-offsetY;
});
document.addEventListener('mouseup',()=>{isDragging=false;});
document.addEventListener('mousemove',e=>{
    if(!isDragging) return;
    offsetX=e.clientX-startX;
    offsetY=e.clientY-startY;
    mapContainer.style.transform=`translate(${offsetX}px, ${offsetY}px) scale(${scale})`;
    drawHeatmap();
});

/* ===== TOGGLE HEAT ===== */
toggleHeatBtn.addEventListener('click',()=>{
    showHeat=!showHeat;
    drawHeatmap();
});

/* ===== INIT ===== */
mapContainer.style.transform=`translate(0px,0px) scale(1)`;
drawHeatmap();
</script>
</body>
</html>
